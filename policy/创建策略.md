# 创建策略


### 调用方式: POST

### 接口地址:

```
https://api.freelog.com/v1/resources/policies
```

### body传入参数说明：

| 参数 | 必选 | 类型及范围 | 说明 |
| :--- | :--- | :--- | :--- |
|resourceId|必选|string|资源ID
|policyText|必选|string|策略描述语言(base64转译)
|languageType|必选|string|策略语言类型(yaml和freelog_policy_lang)


### body示例

```js
{
	"resourceId": "b83093f82462b6d44a78208c9fcb74347be7f877",
    "policyText": "Rm9yIHVzZXJBLCB1c2VyQiBpbiB0aGUgZm9sbG93aW5nIHN0YXRlczoKICBpbiBpbml0aWFsOnByb2NlZWQgdG8gYWN0aXZhdGV0d28gb24gYWNjZXB0aW5nIGxpY2Vuc2UgbGljZW5zZUEsIGxpY2Vuc2VCIGFuZCBvbiBjb250cmFjdF9ndWFyYW50eSBvZiA1MDAwIHJlZnVuZCBhZnRlciAxIGRheQogIGluIGFjdGl2YXRldHdvOiBwcm9jZWVkIHRvIGFjdGl2YXRlIG9uIGRhdGUgMjAxMi0xMi0xMgogIGluIGFjdGl2YXRlOiBwcm9jZWVkIHRvIGFjdGl2YXRldHdvIG9uIHRoZSBlbmQgb2YgZGF5CiAgaW4gYWN0aXZhdGV0d286IHByb2NlZWQgdG8gYWN0aXZhdGUgb24gMTAgZGF5IGFmdGVyIGNvbnRyYWN0IGNyZWF0aW9uCiAgSSBhZ3JlZSB0byBhdXRob3JpemUgdG9rZW4gaW4gYmVnaW5pbmcsIGFjdGl2YXRl",
    "languageType": "freelog_policy_lang"
}
```

### 返回说明：

| 返回值字段 | 字段类型 | 字段说明 |
| :--- | :--- | :--- |
| resourceId | string | 资源ID |
| serialNumber | string | 本次更新策略序列号 |
| policyText | string | 策略描述语言 |
| languageType | string | 策略描述语言类型 |
| userId | int | 创建者ID |
| createDate | date | 创建日期 |
| updateDate | date | 更新日期 |
| policy | object[] | 策略描述 |
| ** teminateState | string | 策略终止状态 |
| ** initialState | string | 策略初始状态 |
| ** activatedStates | string[] | 策略激活状态 |
| ** users | object[] | 授权对象 |
| ** segmentId | string| 策略段落ID |
| ** fsmDescription | object[] | 状态机描述对象 |
| **** currentState | string| 当前状态 |
| **** nextState | string| 下一状态 |
| **** event | object| 触发事件 |


### 返回示例

```js
{
    "ret": 0,
    "errcode": 0,
    "msg": "success",
    "data": {
        "policyId": "59ddb58ad62d0d269803eed5",
        "resourceId": "b83093f82462b6d44a78208c9fcb74347be7f877",
        "serialNumber": "59ddb58ad62d0d269803eed4",
        "policy": [
            {
                "teminateState": "terminate",
                "initialState": "initial",
                "activatedStates": [
                    "begining",
                    "activate"
                ],
                "fsmDescription": [
                    {
                        "event": {
                            "type": "compoundEvents",
                            "params": [
                                {
                                    "eventName": "signing_licenseA_licenseB",
                                    "params": [
                                        "licenseA",
                                        "licenseB"
                                    ],
                                    "type": "signing"
                                },
                                {
                                    "eventName": "contractGuaranty_5000_1_event",
                                    "params": [
                                        "5000",
                                        "1",
                                        "day"
                                    ],
                                    "type": "contractGuaranty"
                                }
                            ],
                            "eventId": "f46afa79308647e0a25661dbcb5d80cb"
                        },
                        "nextState": "activatetwo",
                        "currentState": "initial"
                    },
                    {
                        "event": {
                            "eventId": "15c92a7b07bd4526a81e3c563bc1b306"
                        },
                        "nextState": "activate",
                        "currentState": "activatetwo"
                    },
                    {
                        "event": {
                            "eventId": "fc96e68b5ad94537826f6a4b4899c65e"
                        },
                        "nextState": "activatetwo",
                        "currentState": "activate"
                    },
                    {
                        "event": {
                            "eventId": "635799b3adf54e66b6c71b770c9f66a5"
                        },
                        "nextState": "activate",
                        "currentState": "activatetwo"
                    }
                ],
                "users": [
                    {
                        "users": [
                            "userA",
                            "userB"
                        ],
                        "userType": "individuals"
                    }
                ],
                "segmentId": "a79e813d70108e33fa7e84a576639e3c"
            }
        ],
        "policyText": "For userA, userB in the following states:\n  in initial:proceed to activatetwo on accepting license licenseA, licenseB and on contract_guaranty of 5000 refund after 1 day\n  in activatetwo: proceed to activate on date 2012-12-12\n  in activate: proceed to activatetwo on the end of day\n  in activatetwo: proceed to activate on 10 day after contract creation\n  I agree to authorize token in begining, activate",
        "languageType": "freelog_policy_lang",
        "userId": 1,
        "createDate": "2017-10-11T06:09:14.303Z",
        "updateDate": "2017-10-11T06:09:14.303Z",
        "status": 0
    }
}
```
