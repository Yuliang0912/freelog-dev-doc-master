# 获取展品授权信息



### 调用方式: GET



### 接口地址:

```
正式环境:
url1: https://api.freelog.com/v2/auths/exhibits/{exhibitId}/{result|info|fileStream}
url2: https://api.freelog.com/v2/auths/exhibits/{nodeId}/{workIdOrName}/{result|info|fileStream}
测试节点环境:
url1: https://api.freelog.com/v2/auths/exhibits/test/{exhibitId}/{result|info|fileStream}
url2: https://api.freelog.com/v2/auths/exhibits/test/{nodeId}/{workIdOrName}/{result|info|fileStream}
```



### url1传入参数说明：

| 参数 | 必选 | 类型及范围 | 说明 |
| :--- | :--- | :--- | :--- |
| exhibitId | 必选 | string | 展品Id |
| parentNid | 可选 | string | 依赖树上的父级节点ID,一般获取展品子依赖需要传递 |
| subWorkIdOrName | 可选 | string | 子依赖的作品ID作品名称 |
| subWorkType | 可选 | string | 子依赖的作品类型 (1:独立资源 2:组合资源 3:节点组合资源 4:存储对象) |
| subFilePath | 可选 | string | 主题或插件的压缩包内部子资源,需要带相对路径 |



### url2传入参数说明：

| 参数 | 必选 | 类型及范围 | 说明 |
| :--- | :--- | :--- | :--- |
| nodeId | 必选 | int | 节点ID |
| workIdOrName | 必选 | string | 作品ID或者名称,需要encodeURIComponent编码 |
| parentNid       | 可选 | string     | 依赖树上的父级节点ID,一般获取展品子依赖需要传递              |
| subWorkIdOrName | 可选 | string     | 子依赖的作品ID作品名称                                       |
| subWorkType     | 可选 | string     | 子依赖的作品类型 (1:独立资源 2:组合资源 3:节点组合资源 4:存储对象) |
| subFilePath     | 可选 | string     | 主题或插件的压缩包内部子资源,需要带相对路径 |



### 返回说明: 公共http-header返回说明：

| 返回值字段 | 字段类型 | 字段说明 |
| :--- | :--- | :--- |
| freelog-work-nid | string | 当前响应的展品的依赖树链路ID |
| freelog-work-id | string | 当前请求的作品ID |
| freelog-work-name | string | 当前请求的作品名称 |
| freelog-work-sub-dependencies | string | 当前作品的依赖(包含依赖的作品ID,作品名称,作品类型和作品资源类型) |
| freelog-resource-type | string | 当前请求的作品的资源类型 |
| freelog-work-property | string | 昨天的属性信息,encodeURIComponent编码过的json字符串 |



### response-type: result (标准授权响应结果)

> 当授权不通过时,会响应402 http状态码

| 返回值字段 | 字段类型 | 字段说明 |
| :--- | :--- | :--- |
| exhibitId | string | 展品ID |
| exhibitName | string | 展品名称 |
| referee | int | 做出授权结果的标的物服务类型(1:资源服务 2:展品服务) |
| defaulterIdentityType | int | 授权不通过责任方(0:无 1:资源 2:节点 3:c端消费者 128:未知) |
| authCode | int | 授权码 |
| isAuth | boolean | 是否授权通过 |
| errorMsg | string | 错误信息 |



### response-type: result 响应示例

```
{
	"ret": 0,
	"errCode": 0,
	"errcode": 0,
	"msg": "success",
	"data": {
		"exhibitId": "619dee91fec334002ed6168c",
		"exhibitName": "contract002",
		"authCode": 303,
		"isAuth": false,
		"errorMsg": "",
		"referee": 2,
		"defaulterIdentityType": 4
	}
}
```



### response-type: info (展品信息)

| 返回值字段 | 字段类型 | 字段说明 |
| :--- | :--- | :--- |
| exhibitId | string | 展品ID |
| exhibitName | string | 展品名称 |
| exhibitTitle | string | 展品标题 |
| tags| string[] | 展品标签 |
| intro |string | 展品简介 |
| coverImages |string[] | 展品封面图 |
| version |string | 展品版本 |
| onlineStatus | int| 上线状态 0:下线 1:上线 |
| userId | int| 展品的创建者ID |
| nodeId | int| 展品所属节点ID |
| policies| object[] | 对外授权的策略组 |
| ** policyId | string | 策略ID |
| ** policyName | string | 策略名称 |
| ** status | int | 策略状态 0:下线(未启用) 1:上线(启用) |
| ** policyText | string | 策略文本 |
| workInfo | object | 展品实际挂载的作品信息 |
| ** workId | string | 作品ID |
| ** workName | string | 作品名称 |
| ** resourceType | string | 作品资源类型 |
| ** workType | int | 作品类型 (1:独立资源 2:组合资源 3:节点组合资源 4:存储对象) |
| ** workOwnerId | int | 作品所有者ID |
| ** workOwnerName | string | 作品所有者名称 |



## response-type: info 响应示例

```
{
	"ret": 0,
	"errCode": 0,
	"errcode": 0,
	"msg": "success",
	"data": {
		"exhibitId": "608667da52abf900867dfd48",
		"exhibitName": "novel-theme",
		"exhibitTitle": "novel-theme",
		"exhibitSubjectType": 2,
		"tags": [],
		"intro": "展品产品侧未提供简介字段",
		"coverImages": [],
		"version": "0.1.3",
		"policies": [{
			"policyId": "3104b19e139f132b9407c9b89c32f637",
			"policyName": "免费策略",
			"status": 1,
			"translateInfo": {
				"audienceInfos": [],
				"fsmInfos": [{
					"stateInfo": {
						"origin": "initial",
						"content": "初始状态"
					},
					"serviceStateInfos": [{
						"origin": "active",
						"content": "已授权"
					}],
					"eventTranslateInfos": []
				}],
				"content": "\n初始状态[已授权]：\n\t\n"
			},
			"policyText": "for public initial[active]:\n  terminate",
			"fsmDescriptionInfo": {
				"initial": {
					"serviceStates": ["active"],
					"isInitial": true,
					"isAuth": true,
					"isTestAuth": false,
					"isTerminate": true,
					"transitions": []
				}
			}
		}],
		"onlineStatus": 1,
		"nodeId": 80000012,
		"userId": 50031,
		"workInfo": {
			"workId": "60865bb6348128003490ae87",
			"workName": "Freelog/novel-theme",
			"resourceType": "theme",
			"workType": 1,
			"workOwnerId": 0,
			"workOwnerName": "Freelog"
		},
		"status": 0
	}
}
```



### response-type: fileStream (文件流)

   标准 fileStream 文件流
