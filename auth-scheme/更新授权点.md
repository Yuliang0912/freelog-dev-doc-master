# 更新授权点

### 调用方式: PUT

### 接口地址:

```
https://api.freelog.com/v1/resources/authSchemes/{authSchemeId}
```

### url传入参数说明：

| 参数 | 必选 | 类型及范围 | 说明 |
| :--- | :--- | :--- | :--- |
|authSchemeId|必选|string|授权点ID|


### body传入参数说明(可选字段代表根据需求需要更新时赋值,不需要更新时,则不把参数构建在body中)：

| 参数 | 必选 | 类型及范围 | 说明 |
| :--- | :--- | :--- | :--- |
|authSchemeName|可选|string|授权点名称,2-100个字符|
|policies|可选|object| 授权策略段 |
|**addPolicySegments|可选|object[]| 新增的授权策略段 |
|****policyName|必选|string| 策略名称 |
|****policyText|必选|string| 策略文本,base64编码 |
|**removePolicySegments|可选|string[]| 需要删除的授权策略段,此处传segmentId |
|**updatePolicySegments|可选|object[]| 需要更新的授权策略段 |
|****policySegmentId|必选|string| 策略段落ID |
|****policyName|必选|string| 策略名称 |
|****policyText|必选|string| 策略文本,base64编码 |
|dutyStatements|可选|object[]|授权点包含的依赖声明|
|**resourceId|必选|string|资源依赖树上的引用节点资源ID|
|**authSchemeId|必选|string|授权方案ID|
|**policySegmentId|必选|string|授权方案的策略段ID|
|**serialNumber|必选|string|授权点的序列号|

### body示例

```js
{
	"authSchemeName": "方案3111-new_",
	"policies": {
		"updatePolicySegments": [{
			"policyName": "新的方案3333444",
			"policyText": "Zm9yIG5vZGVzOgogICBpbiA8aW5pdD4gOgogIHRlcm1pbmF0ZQ==",
			"policySegmentId": "219ed6dd8538fc254b3e10c51d8d52dd"
		}]
	}
}
```


### 返回说明：

| 返回值字段 | 字段类型 | 字段说明 |
| :--- | :--- | :--- |
| authSchemeId | string | 授权点ID |
| authSchemeName | string | 授权点名称 |
| resourceId| string | 授权点所属资源ID|
| userId | int | 创建者ID |
| policy | object[] | 授权策略 |
| ** teminateState | string | 策略终止状态 |
| ** initialState | string | 策略初始状态 |
| ** activatedStates | string[] | 策略激活状态 |
| ** users | object[] | 授权对象 |
| ** segmentId | string| 策略段落ID |
| ** policyName | string | 策略名称 |
| ** fsmDescription | object[] | 状态机描述对象 |
| **** currentState | string| 当前状态 |
| **** nextState | string| 下一状态 |
| **** event | object| 触发事件 |
| serialNumber | string | 本次更新策略序列号 |
| policyText | string | 策略描述语言 |
| dependCount| int | 资源依赖的子资源数量 |
| statementCoverageRate | int | 授权点申明的资源占总依赖资源数量的覆盖率 |
| contractCoverageRate | int | 声明的依赖资源中绑定合同的覆盖率 |
| statementState | int | 授权点的声明类型 (1:全部上抛(默认)  2:全包含  3:部分上抛) |
| dutyStatements | object[] | 授权点申明的资源依赖 |
| **resourceId | string | 资源依赖树上的引用节点资源ID|
| **resourceName | string | 资源依赖树上的引用节点资源名称|
| **authSchemeId | string | 依赖解决所选择的授权方案ID|
| **policySegmentId|string| 所选授权点的策略段ID|
| **serialNumber|string|所选授权点的序列号|
| bubbleResources |  object[] | 冒泡(上抛)的资源 |
| **resourceId | string | 上抛的资源ID|
| **resourceName | string | 上抛的资源名称|
| createDate | date | 创建日期 |
| updateDate | date | 更新日期日期 |
| status | int | 状态 (0:初始状态 1:已发布 2:下架) |


### 返回示例

```js
{
    "ret": 0,
    "errcode": 0,
    "msg": "success",
    "data": {
        "authSchemeId": "5af54b5011e88909c8b58d6a",
        "authSchemeName": "方案1",
        "resourceId": "2b0e51145bd40943e75511efdce36cfceb2eeada",
        "dependCount": 0,
        "statementState": 1,
        "policy": [
            {
                "segmentId": "397c06bd49cb3712437890c9cdf8b222",
                "policyName": "新的方案",
                "segmentText": "for public: in <initial> : terminate",
                "users": [
                    {
                        "userType": "group",
                        "users": [
                            "public"
                        ]
                    }
                ],
                "fsmDescription": [
                    {
                        "currentState": "<initial>"
                    }
                ],
                "activatedStates": [
                    "<initial>"
                ],
                "initialState": "<initial>",
                "terminateState": "terminate"
            }
        ],
        "policyText": "",
        "languageType": "freelog_policy_lang",
        "bubbleResources": [
            {
                "resourceId": "0b8edaf2061fe5280a358ecb09e0818c4c989a1b",
                "resourceName": "我的资源"
            }
        ],
        "dutyStatements": [
            {
                "resourceId": "0bee49c19387521a79aeff78504425dde0ee4897",
                "authSchemeId": "5ae95be038d3b4258c1a607a",
                "policySegmentId": "054632645eb66c4d5ac93892a9cfd51b",
                "serialNumber": "5ae95be038d3b4258c1a6079",
                "resourceName": "我的资源"
            }
        ],
        "statementCoverageRate": 0,
        "associatedContracts": [],
        "contractCoverageRate": 0,
        "userId": 10026,
        "serialNumber": "5af54b5011e88909c8b58d69",
        "status": 0
    }
}
```